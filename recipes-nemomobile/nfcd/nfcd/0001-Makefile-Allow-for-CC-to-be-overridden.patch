From 335d10420f3eaca3b437b2681273f2456b93b997 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Darrel=20Gri=C3=ABt?= <dgriet@gmail.com>
Date: Sun, 20 Nov 2022 17:55:53 +0100
Subject: [PATCH] Makefile: Allow for CC to be overridden.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Upstream-Status: Inappropriate

Signed-off-by: Darrel GriÃ«t <dgriet@gmail.com>
---
 core/Makefile                | 2 +-
 plugins/Makefile             | 2 +-
 src/Makefile                 | 2 +-
 test/nfcdep-client/Makefile  | 2 +-
 test/nfcdep-service/Makefile | 2 +-
 tools/iso-dep/Makefile       | 2 +-
 tools/ndef-read/Makefile     | 2 +-
 tools/ndef-write/Makefile    | 2 +-
 unit/common/Makefile         | 2 +-
 9 files changed, 9 insertions(+), 9 deletions(-)

diff --git a/core/Makefile b/core/Makefile
index fed6ad5..c28e055 100644
--- a/core/Makefile
+++ b/core/Makefile
@@ -91,7 +91,7 @@ PCVERSION = $(VERSION_MAJOR).$(VERSION_MINOR).$(VERSION_RELEASE)
 # Tools and flags
 #
 
-CC = $(CROSS_COMPILE)gcc
+CC ?= $(CROSS_COMPILE)gcc
 LD = $(CC)
 WARNINGS = -Wall -Wstrict-aliasing -Wunused-result
 INCLUDES = -I$(INCLUDE_DIR)
diff --git a/plugins/Makefile b/plugins/Makefile
index a93142e..179d0b3 100644
--- a/plugins/Makefile
+++ b/plugins/Makefile
@@ -261,7 +261,7 @@ $(COVERAGE_DBUS_HANDLERS_BUILD_DIR):
 # Tools and flags
 #
 
-CC = $(CROSS_COMPILE)gcc
+CC ?= $(CROSS_COMPILE)gcc
 LD = $(CC)
 WARNINGS = -Wall -Wstrict-aliasing -Wunused-result
 INCLUDES = -I. -I../core/include -I$(GEN_DIR)
diff --git a/src/Makefile b/src/Makefile
index 7d5e519..914f8c7 100644
--- a/src/Makefile
+++ b/src/Makefile
@@ -70,7 +70,7 @@ NFC_PLUGINS_RELEASE_LIB = $(NFC_PLUGINS_BUILD_DIR)/release/$(NFC_PLUGINS_LIB)
 # Tools and flags
 #
 
-CC = $(CROSS_COMPILE)gcc
+CC ?= $(CROSS_COMPILE)gcc
 LD = $(CC)
 DEBUG_FLAGS = -g
 RELEASE_FLAGS =
diff --git a/test/nfcdep-client/Makefile b/test/nfcdep-client/Makefile
index 998472e..c29905f 100644
--- a/test/nfcdep-client/Makefile
+++ b/test/nfcdep-client/Makefile
@@ -43,7 +43,7 @@ RELEASE_BUILD_DIR = $(BUILD_DIR)/release
 # Tools and flags
 #
 
-CC = $(CROSS_COMPILE)gcc
+CC ?= $(CROSS_COMPILE)gcc
 LD = $(CC)
 DEBUG_FLAGS = -g
 RELEASE_FLAGS =
diff --git a/test/nfcdep-service/Makefile b/test/nfcdep-service/Makefile
index 33eb950..9021560 100644
--- a/test/nfcdep-service/Makefile
+++ b/test/nfcdep-service/Makefile
@@ -42,7 +42,7 @@ RELEASE_BUILD_DIR = $(BUILD_DIR)/release
 # Tools and flags
 #
 
-CC = $(CROSS_COMPILE)gcc
+CC ?= $(CROSS_COMPILE)gcc
 LD = $(CC)
 DEBUG_FLAGS = -g
 RELEASE_FLAGS =
diff --git a/tools/iso-dep/Makefile b/tools/iso-dep/Makefile
index c7966b0..e559a79 100644
--- a/tools/iso-dep/Makefile
+++ b/tools/iso-dep/Makefile
@@ -44,7 +44,7 @@ RELEASE_BUILD_DIR = $(BUILD_DIR)/release
 # Tools and flags
 #
 
-CC = $(CROSS_COMPILE)gcc
+CC ?= $(CROSS_COMPILE)gcc
 LD = $(CC)
 DEBUG_FLAGS = -g
 RELEASE_FLAGS =
diff --git a/tools/ndef-read/Makefile b/tools/ndef-read/Makefile
index ca2ea77..f965385 100644
--- a/tools/ndef-read/Makefile
+++ b/tools/ndef-read/Makefile
@@ -44,7 +44,7 @@ RELEASE_BUILD_DIR = $(BUILD_DIR)/release
 # Tools and flags
 #
 
-CC = $(CROSS_COMPILE)gcc
+CC ?= $(CROSS_COMPILE)gcc
 LD = $(CC)
 DEBUG_FLAGS = -g
 RELEASE_FLAGS =
diff --git a/tools/ndef-write/Makefile b/tools/ndef-write/Makefile
index e3c8f8b..c91ceb3 100644
--- a/tools/ndef-write/Makefile
+++ b/tools/ndef-write/Makefile
@@ -46,7 +46,7 @@ RELEASE_BUILD_DIR = $(BUILD_DIR)/release
 # Tools and flags
 #
 
-CC = $(CROSS_COMPILE)gcc
+CC ?= $(CROSS_COMPILE)gcc
 LD = $(CC)
 DEBUG_FLAGS = -g
 RELEASE_FLAGS =
diff --git a/unit/common/Makefile b/unit/common/Makefile
index 008cfc8..8884020 100644
--- a/unit/common/Makefile
+++ b/unit/common/Makefile
@@ -59,7 +59,7 @@ endif
 # Tools and flags
 #
 
-CC = $(CROSS_COMPILE)gcc
+CC ?= $(CROSS_COMPILE)gcc
 LD = $(CC)
 WARNINGS += -Wall
 INCLUDES += -I$(COMMON_DIR) -I$(CORE_DIR)/src -I$(CORE_DIR)/include
